<Window x:Class="REghZyAccountManagerV6.Views.MainView.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:REghZyAccountManagerV6.Views.MainView"
        xmlns:app="clr-namespace:REghZyAccountManagerV6" xmlns:controls="clr-namespace:REghZyAccountManagerV6.Accounting.Controls"
        xmlns:converters="clr-namespace:REghZyAccountManagerV6.Converters"
        d:DataContext="{d:DesignInstance Type=local:MainViewModel}"
        mc:Ignorable="d"
        Title="MainWindow" 
        Width="1280" 
        Height="720"
        Style="{DynamicResource CustomWindowStyle}"
        DataContext="{x:Static app:ViewModelLocator.MainView}" 
        Background="{DynamicResource AREghZyBrush.Deep.3.Background.Static}">
    <Window.Resources>
        <converters:BoolToStringConverter x:Key="BoolToStringConverter" />
    </Window.Resources>
    <Grid Margin="10">
        <Grid Margin="0,40,0,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="2*" MinWidth="230"/>
                <ColumnDefinition Width="10"/>
                <ColumnDefinition Width="8*"/>
            </Grid.ColumnDefinitions>
            <Grid DataContext="{Binding Panel, Mode=OneTime}">
                <Button Command="{Binding CreateNewAccountCommand, Mode=OneTime}" VerticalAlignment="Top" Height="50" Content="Add New Account"/>
                <Button Command="{Binding DeleteSelectedAccountCommand, Mode=OneTime}" VerticalAlignment="Top" Height="50" Content="Delete Selected Account" Margin="55,55,0,0"/>
                <Button Command="{Binding UndoLastDeletionCommand, Mode=OneTime}" Content="Undo" HorizontalContentAlignment="Center" Margin="0,55,0,0" 
                        IsEnabled="{Binding Path=CanUndo, Source={x:Static app:ViewModelLocator.AccountCollection}, UpdateSourceTrigger=PropertyChanged}" 
                        Height="50" VerticalAlignment="Top" HorizontalAlignment="Left" Width="50"/>
                <ToggleButton IsChecked="{Binding IsEditorOpen, UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Top" Height="50" Margin="0,110,0,0"
                              Content="{Binding IsEditorOpen, Converter={StaticResource BoolToStringConverter}, ConverterParameter=Close Editor|Open Editor}"/>
                <Separator Height="1" Margin="0,165,0,0" VerticalAlignment="Top" />
                <Grid Margin="0,171,0,96" DataContext="{Binding Finder, Mode=OneTime}">
                    <TextBox VerticalAlignment="Top" Height="29" VerticalContentAlignment="Center" 
                             Padding="4 0 0 0" BorderThickness="1 1 1 1" Margin="0,27,0,0" 
                             Background="{DynamicResource AREghZyBrush.Deep.2.Background.Static}"
                             Text="{Binding Input, UpdateSourceTrigger=PropertyChanged}"/>
                    <ListBox VerticalContentAlignment="Center" 
                             Margin="0,56,0,30" 
                             BorderThickness="1 0 1 1" 
                             BorderBrush="{DynamicResource AREghZyBrush.Primary.1.Border.Static}" 
                             Background="{DynamicResource AREghZyBrush.Deep.2.Background.Static}"
                             ItemsSource="{Binding FoundAccounts, Mode=OneTime}">
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <controls:SmallAccountControl DataContext="{Binding}" ContextMenu="{DynamicResource AccountContextMenu}"/>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>
                    <Button VerticalAlignment="Bottom" Height="30" Content="Clear" 
                            BorderThickness="1 0 1 1" BorderBrush="{DynamicResource AREghZyBrush.Primary.1.Border.Static}"
                            Command="{Binding ClearResultsCommand, Mode=OneTime}"/>
                    <Expander VerticalAlignment="Top" VerticalContentAlignment="Center" Header="Search Options" HorizontalAlignment="Left" Width="181">
                        <Border Background="{DynamicResource AREghZyBrush.Deep.2.Background.Static}">
                            <Border.BitmapEffect>
                                <DropShadowBitmapEffect ShadowDepth="1"/>
                            </Border.BitmapEffect>
                            <StackPanel Margin="5">
                                <Label Height="20" Padding="0" VerticalContentAlignment="Center" HorizontalContentAlignment="Center">
                                    <TextBlock Text="Preferences"/>
                                </Label>
                                <CheckBox Content="Search contains" IsChecked="{Binding CheckContains, UpdateSourceTrigger=PropertyChanged}" 
                                          ToolTip="True to check any account that contains the search text, otherwise only if it starts with it"/>
                                <Separator Height="1"/>
                                <Label Height="20" Padding="0" VerticalContentAlignment="Center" HorizontalContentAlignment="Center">
                                    <TextBlock Text="Search Type"/>
                                </Label>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="42*"/>
                                        <ColumnDefinition Width="2"/>
                                        <ColumnDefinition Width="50*"/>
                                    </Grid.ColumnDefinitions>
                                    <Button Content="Select All"   Margin="0,1,0,1" Command="{Binding SelectAllCommand, Mode=OneTime}"/>
                                    <Button Content="Deselect All"   Margin="0,1,0,1" Grid.Column="2" Command="{Binding DeselectAllCommand, Mode=OneTime}"/>
                                </Grid>
                                <CheckBox Content="Account Name"   Margin="0,1,0,1" IsChecked="{Binding SearchAccountName, UpdateSourceTrigger=PropertyChanged}"/>
                                <CheckBox Content="Email"          Margin="0,1,0,1" IsChecked="{Binding SearchEmail, UpdateSourceTrigger=PropertyChanged}"/>
                                <CheckBox Content="Username"       Margin="0,1,0,1" IsChecked="{Binding SearchUsername, UpdateSourceTrigger=PropertyChanged}"/>
                                <CheckBox Content="Password"       Margin="0,1,0,1" IsChecked="{Binding SearchPassword, UpdateSourceTrigger=PropertyChanged}"/>
                                <CheckBox Content="Date of Birth"  Margin="0,1,0,1" IsChecked="{Binding SearchDateOfBirth, UpdateSourceTrigger=PropertyChanged}"/>
                                <CheckBox Content="Security Info"  Margin="0,1,0,1" IsChecked="{Binding SearchSecurityInfo, UpdateSourceTrigger=PropertyChanged}"/>
                                <CheckBox Content="Custom Info"    Margin="0,1,0,1" IsChecked="{Binding SearchExtraInfo, UpdateSourceTrigger=PropertyChanged}"/>
                            </StackPanel>
                        </Border>
                    </Expander>
                </Grid>
                <Separator Height="1" Margin="0,0,0,90" VerticalAlignment="Bottom"/>
                <Button VerticalAlignment="Bottom" Height="40" Content="Move Account Up" Margin="0,0,0,45"
                        Command="{Binding MoveItemUpCommand, Mode=OneTime}"/>
                <Button VerticalAlignment="Bottom" Height="40" Content="Move Account Down"
                        Command="{Binding MoveItemDownCommand, Mode=OneTime}"/>
            </Grid>
            <GridSplitter Grid.Column="1" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Background="Transparent"/>
            <DockPanel Grid.Column="2" DataContext="{Binding Collection, Mode=OneTime}">
                <Grid x:Name="EditorView" DockPanel.Dock="Right">
                    <Grid Width="350" DataContext="{Binding SelectedAccount, UpdateSourceTrigger=PropertyChanged}">
                        <Grid Height="218" VerticalAlignment="Top">
                            <Label Content="{Binding AccountName, FallbackValue=okay, UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Top" 
                                   Background="Transparent" BorderBrush="Transparent" FontSize="16"
                                   HorizontalContentAlignment="Center" VerticalContentAlignment="Center" Height="32"
                                   ToolTip="Double click to edit..." ToolTipService.InitialShowDelay="500"/>
                            <Separator VerticalAlignment="Top" Margin="10,32,0,0" Background="{DynamicResource AREghZyBrush.Primary.1.Border.Static}"/>
                            <Grid Margin="0,38,0,0" Height="32" VerticalAlignment="Top">
                                <Label VerticalContentAlignment="Center" FontSize="14" Content="Email" HorizontalAlignment="Left" Width="75" Margin="5,0,0,0"/>
                                <TextBox FontSize="14" Text="{Binding Email, UpdateSourceTrigger=PropertyChanged}" Margin="80,0,60,0" Padding="2" VerticalContentAlignment="Center"/>
                                <Button Content="Copy" FontSize="14" Command="{Binding CopyToClipboardCommand, Mode=OneTime}" CommandParameter="e" BorderThickness="0 1 1 1" HorizontalAlignment="Right" Width="60" Background="{DynamicResource AREghZyBrush.Primary.1.Border.Static}" BorderBrush="{DynamicResource AREghZyBrush.Primary.1.Border.Static}"/>
                            </Grid>
                            <Grid Margin="0,75,0,0" Height="32" VerticalAlignment="Top">
                                <Label VerticalContentAlignment="Center" FontSize="14" Content="Username" HorizontalAlignment="Left" Width="75" Margin="5,0,0,0"/>
                                <TextBox FontSize="14" Text="{Binding Username, UpdateSourceTrigger=PropertyChanged}" Margin="80,0,60,0" Padding="2" VerticalContentAlignment="Center"/>
                                <Button Content="Copy" FontSize="14" Command="{Binding CopyToClipboardCommand, Mode=OneTime}" CommandParameter="u" BorderThickness="0 1 1 1" HorizontalAlignment="Right" Width="60" Background="{DynamicResource AREghZyBrush.Primary.1.Border.Static}" BorderBrush="{DynamicResource AREghZyBrush.Primary.1.Border.Static}"/>
                            </Grid>
                            <Grid Margin="0,112,0,0" Height="32" VerticalAlignment="Top">
                                <Label VerticalContentAlignment="Center" FontSize="14" Content="Password" HorizontalAlignment="Left" Width="75" Margin="5,0,0,0"/>
                                <TextBox FontSize="14" Text="{Binding Password, UpdateSourceTrigger=PropertyChanged}" Margin="80,0,60,0" Padding="2" VerticalContentAlignment="Center"/>
                                <Button Content="Copy" FontSize="14" Command="{Binding CopyToClipboardCommand, Mode=OneTime}" CommandParameter="p" BorderThickness="0 1 1 1" HorizontalAlignment="Right" Width="60" Background="{DynamicResource AREghZyBrush.Primary.1.Border.Static}" BorderBrush="{DynamicResource AREghZyBrush.Primary.1.Border.Static}"/>
                            </Grid>
                            <Grid Margin="0,149,0,0" Height="32" VerticalAlignment="Top">
                                <Label VerticalContentAlignment="Center" FontSize="14" Content="D.O.B" HorizontalAlignment="Left" Width="75" Margin="5,0,0,0"/>
                                <TextBox FontSize="14" Text="{Binding DateOfBirth, UpdateSourceTrigger=PropertyChanged}" Margin="80,0,60,0" Padding="2" VerticalContentAlignment="Center"/>
                                <Button Content="Copy" FontSize="14" Command="{Binding CopyToClipboardCommand, Mode=OneTime}" CommandParameter="dob" BorderThickness="0 1 1 1" HorizontalAlignment="Right" Width="60" Background="{DynamicResource AREghZyBrush.Primary.1.Border.Static}" BorderBrush="{DynamicResource AREghZyBrush.Primary.1.Border.Static}"/>
                            </Grid>
                            <Grid Margin="0,186,0,0" Height="32" VerticalAlignment="Top">
                                <Label VerticalContentAlignment="Center" FontSize="14" Content="Security" HorizontalAlignment="Left" Width="75" Margin="5,0,0,0"/>
                                <TextBox FontSize="14" Text="{Binding SecurityInfo, UpdateSourceTrigger=PropertyChanged}" Margin="80,0,60,0" Padding="2" VerticalContentAlignment="Center"/>
                                <Button Content="Copy" FontSize="14" Command="{Binding CopyToClipboardCommand, Mode=OneTime}" CommandParameter="si" BorderThickness="0 1 1 1" HorizontalAlignment="Right" Width="60" Background="{DynamicResource AREghZyBrush.Primary.1.Border.Static}" BorderBrush="{DynamicResource AREghZyBrush.Primary.1.Border.Static}"/>
                            </Grid>
                        </Grid>
                        <Separator VerticalAlignment="Top" Margin="10,223,0,0" Background="{DynamicResource AREghZyBrush.Primary.1.Border.Static}"/>
                        <Grid Margin="0,229,0,0">
                            <Label Content="Custom Information (TODO)" VerticalAlignment="Top" Margin="5,0,0,0" HorizontalContentAlignment="Center"/>
                            <Grid Margin="10,31,0,0" DataContext="{Binding ExtraInfo, Mode=OneTime}">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="27"/>
                                    <RowDefinition Height="1*"/>
                                </Grid.RowDefinitions>
                                <TextBox Text="{Binding ToAdd, UpdateSourceTrigger=PropertyChanged}" BorderThickness="1 1 1 1" 
                                         VerticalContentAlignment="Center" Margin="0,0,190,0" Padding="3 1 1 1" 
                                         Background="{DynamicResource AREghZyBrush.Deep.2.Background.Static}">
                                    <TextBox.InputBindings>
                                        <KeyBinding Command="{Binding AddItemCommand, Mode=OneTime}" Key="Enter"/>
                                    </TextBox.InputBindings>
                                </TextBox>
                                <Border Margin="0,26,150,0" BorderThickness="1 0" 
                                        BorderBrush="{DynamicResource AREghZyBrush.Primary.1.Border.Static}"
                                        Background="{DynamicResource AREghZyBrush.Deep.3.Background.Static}" Visibility="Collapsed"/>
                                <Button Command="{Binding AddItemCommand, Mode=OneTime}" Content="Add" Margin="0,0,125,0" BorderThickness="0 1 0 1" HorizontalAlignment="Right" Width="65" BorderBrush="{DynamicResource AREghZyBrush.Primary.1.Border.Static}" ToolTip="Adds the text (on the left) into the list below"/>
                                <Button Command="{Binding RemoveItemCommand, Mode=OneTime}" Content="Remove" BorderThickness="1 1 0 1" HorizontalAlignment="Right" Width="70" BorderBrush="{DynamicResource AREghZyBrush.Primary.1.Border.Static}" Margin="0,0,55,0" ToolTip="Removes the selected element below"/>
                                <Button Command="{Binding PasteItemCommand, Mode=OneTime}" Content="Paste" BorderThickness="1 1 1 1" HorizontalAlignment="Right" Width="55" BorderBrush="{DynamicResource AREghZyBrush.Primary.1.Border.Static}" ToolTip="Adds the text (in your clipboard) into the list below"/>
                                <ListBox BorderBrush="{DynamicResource AREghZyBrush.Primary.1.Border.Static}" Grid.Row="1" 
                                         Background="{DynamicResource AREghZyBrush.Deep.2.Background.Static}"
                                         BorderThickness="1 0 1 1" 
                                         ItemsSource="{Binding ExtraInformation, Mode=OneTime}"
                                         SelectedItem="{Binding SelectedItem, UpdateSourceTrigger=PropertyChanged}"
                                         HorizontalContentAlignment="Stretch"
                                         ScrollViewer.HorizontalScrollBarVisibility="Disabled">
                                    <ListBox.ItemTemplate>
                                        <DataTemplate>
                                            <controls:DoubleClickEditableBox DataContext="{Binding}" 
                                                                             MinHeight="30"/>
                                        </DataTemplate>
                                    </ListBox.ItemTemplate>
                                </ListBox>
                            </Grid>
                        </Grid>
                    </Grid>
                </Grid>
                <Border Background="{DynamicResource AREghZyBrush.Deep.3.Background.Static}" BorderThickness="1" 
                        BorderBrush="{DynamicResource AREghZyBrush.Deep.2.Border.Static}">
                    <ListBox ScrollViewer.CanContentScroll="False"
                             HorizontalContentAlignment="Stretch"
                             ItemsSource="{Binding Accounts, UpdateSourceTrigger=PropertyChanged}"
                             SelectedItem="{Binding SelectedAccount, UpdateSourceTrigger=PropertyChanged}" 
                             SelectedIndex="{Binding SelectedIndex, UpdateSourceTrigger=PropertyChanged}"
                             Background="{DynamicResource AREghZyBrush.Deep.2.Background.Static}">
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <controls:LargeAccountControl DataContext="{Binding}" ContextMenu="{DynamicResource DeletableAccountContextMenu}"/>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>
                </Border>
            </DockPanel>
        </Grid>
    </Grid>
</Window>
